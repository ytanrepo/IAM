<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div>
        <!--<input id="displayText" style="font-size:large" /> <br />-->
        <input type="text" name="textBox" onKeyUp="return textUpdate()" />
    </div>    

    <a href onClick="sendCommand(run); return false;">Run</a>
    <a href onClick="sendCommand(walk); return false;">Walk</a>
    <a href onClick="sendCommand(defend); return false;">Defend</a>
    <a href onClick="sendCommand(melee); return false;">Hit</a>
    <a href onClick="sendCommand(magic1); return false;">Cast Spell 1</a>
    <a href onClick="sendCommand(magic2); return false;">Cast Spell 2</a>
    <a href onClick="sendCommand(magic3); return false;">Cast Spell 3</a>
    <a href onClick="sendCommand(die); return false;">Die</a>

    <!--'{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Run","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Walk","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Defend","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Melee","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Hit","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Jump","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"CastMagic1","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"CastMagic2","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"CastMagic3","functionParameters":[],"deviceId":"123456"}'
    '{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"Wizard-Blue","objectType":"WizardController","functionName":"Die","functionParameters":[],"deviceId":"123456"}'-->
   
</body>
</html>

<script src="scripts/home.js" type="text/javascript"></script>
<script src="scripts/mqttws31.js" type="text/javascript"></script>
<script src="scripts/mqtt.js" type="text/javascript"></script>

function AppendUnityCommand(command, objectName, objectType, functionName, functionParameter, textMessage, deviceId)

<script>var run = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Run", "", "123456") </script>
<script>var walk = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var defend = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var melee = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var hit = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var jump = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var magic1 = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var magic2 = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var magic3 = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>
<script>var die = AppendUnityCommand("ExecuteRequest", "Wizard-Blue", "WizardController", "Walk", "", "123456")</script>

<script type="text/javascript">


    // Create a client instance
    client = new Paho.MQTT.Client("m13.cloudmqtt.com", 35424, "web_" + parseInt(Math.random() * 100, 10));

    // set callback handlers
    client.onConnectionLost = onConnectionLost;
    client.onMessageArrived = onMessageArrived;

    var options = {
        useSSL: true,
        userName: "IAM",
        password: "Comcast1",
        onSuccess: onConnect,
        onFailure: doFail
    }

    // connect the client
    client.connect(options);

    ////Update Text Value Message
    //function textUpdate() {
    //    var textValue = document.getElementsByName('textBox')[0].value;
    //    var textString = AppendUnityCommand("ExecuteRequest", "UpdateText", textValue, "123456" )
    //    console.log(textString);
    //    sendCommand(textString);
    //}

    ////Get the Parameters and Append to a Unity Command    
    ////Example: //'{"$types":{"ExecuteRequest, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"HTML","objectType":"HTMLGuiManager","functionName":"UpdateText","functionParameters":["' + textValue + '"],"deviceId":"123456"}';
    //function AppendUnityCommand(command, functionName, functionParameter, textMessage, deviceId) {
    //    var commandString = '{"$types":{"' + 
    //    command + 
    //    'Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null":"1"},"$type":"1","objectName":"HTML","objectType":"HTMLGuiManager","functionName":"' +
    //    functionName +
    //    '","functionParameters":["' + textMessage +
    //    '"],"deviceId":"' +
    //    deviceId + '"}';

    //    console.log(commandString)
    //    return commandString;

    //}
</script>

